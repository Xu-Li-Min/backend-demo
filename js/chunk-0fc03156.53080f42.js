(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fc03156"],{"159d":function(t,e,c){"use strict";c.r(e);var i=c("7a23"),l={class:"table mt-4"},n=Object(i["i"])("thead",null,[Object(i["i"])("tr",null,[Object(i["i"])("th",null,"購買時間"),Object(i["i"])("th",null,"Email"),Object(i["i"])("th",null,"購買款項"),Object(i["i"])("th",null,"應付金額"),Object(i["i"])("th",null,"是否付款"),Object(i["i"])("th",null,"編輯")])],-1),a={class:"text-right"},r={style:{"font-size":"14px"}},d={class:"text-right"},o={class:"form-check form-switch"},b={key:0},O={key:1},s={class:"btn-group"};function u(t,e,c,u,j,p){var h=Object(i["B"])("Loading"),m=Object(i["B"])("OrderModal");return Object(i["u"])(),Object(i["e"])(i["a"],null,[Object(i["i"])(h,{active:j.isLoading},null,8,["active"]),Object(i["i"])("table",l,[n,Object(i["i"])("tbody",null,[(Object(i["u"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(j.orders,(function(e){return Object(i["u"])(),Object(i["e"])("tr",{key:e.create_at},[Object(i["i"])("td",null,Object(i["E"])(t.$filter.date(e.create_at)),1),Object(i["i"])("td",null,Object(i["E"])(e.user.email),1),Object(i["i"])("td",a,[(Object(i["u"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.products,(function(t){return Object(i["u"])(),Object(i["e"])("p",{key:t},[Object(i["h"])(Object(i["E"])(t.product.title)+" ",1),Object(i["i"])("span",r,"(數量："+Object(i["E"])(t.qty)+Object(i["E"])(t.product.unit)+")",1)])})),128))]),Object(i["i"])("td",d,Object(i["E"])(e.total),1),Object(i["i"])("td",null,[Object(i["i"])("div",o,[Object(i["N"])(Object(i["i"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(e.id),"onUpdate:modelValue":function(t){return e.is_paid=t},onChange:function(t){return p.updatePaid(e)}},null,40,["id","onUpdate:modelValue","onChange"]),[[i["H"],e.is_paid]]),Object(i["i"])("label",{class:"form-check-label",for:"paidSwitch".concat(e.id)},[e.is_paid?(Object(i["u"])(),Object(i["e"])("span",b,"已付款")):(Object(i["u"])(),Object(i["e"])("span",O,"未付款"))],8,["for"])])]),Object(i["i"])("td",null,[Object(i["i"])("div",s,[Object(i["i"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(t){return p.modalOpen(e)}}," 檢視 ",8,["onClick"]),Object(i["i"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(t){return p.delOrder(e)}}," 刪除 ",8,["onClick"])])])])})),128))])]),Object(i["i"])(m,{ref:"orderModal",orderInfo:j.tempOrder,onConfirmOrder:p.getOrders},null,8,["orderInfo","onConfirmOrder"])],64)}var j=c("5530"),p=(c("99af"),c("b0c0"),{class:"modal fade",id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),h={class:"modal-dialog modal-xl",role:"document"},m={class:"modal-content border-0"},f=Object(i["i"])("div",{class:"modal-header bg-dark text-white"},[Object(i["i"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(i["i"])("span",null,"訂單細節")]),Object(i["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),y={class:"modal-body"},g={class:"row"},v={class:"col-md-4"},k=Object(i["i"])("h3",null,"用戶資料",-1),x={class:"table"},E={key:0},w=Object(i["i"])("th",{style:{width:"100px"}},"姓名",-1),_=Object(i["i"])("th",null,"Email",-1),C=Object(i["i"])("th",null,"電話",-1),L=Object(i["i"])("th",null,"地址",-1),M={class:"col-md-8"},$=Object(i["i"])("h3",null,"訂單細節",-1),I={class:"table"},z=Object(i["i"])("th",{style:{width:"100px"}},"訂單編號",-1),P=Object(i["i"])("th",null,"下單時間",-1),S=Object(i["i"])("th",null,"付款時間",-1),q={key:0},B={key:1},J=Object(i["i"])("th",null,"付款狀態",-1),U={key:0,class:"text-success"},V={key:1,class:"text-muted"},F=Object(i["i"])("th",null,"總金額",-1),H=Object(i["i"])("h3",null,"選購商品",-1),N={class:"table"},A=Object(i["i"])("thead",null,[Object(i["i"])("tr")],-1),D={class:"text-end"},G=Object(i["i"])("div",{class:"modal-footer"},[Object(i["i"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," 確認 ")],-1);function K(t,e,c,l,n,a){return Object(i["u"])(),Object(i["e"])("div",p,[Object(i["i"])("div",h,[Object(i["i"])("div",m,[f,Object(i["i"])("div",y,[Object(i["i"])("div",g,[Object(i["i"])("div",v,[k,Object(i["i"])("table",x,[n.tempOrder.user?(Object(i["u"])(),Object(i["e"])("tbody",E,[Object(i["i"])("tr",null,[w,Object(i["i"])("td",null,Object(i["E"])(n.tempOrder.user.name),1)]),Object(i["i"])("tr",null,[_,Object(i["i"])("td",null,Object(i["E"])(n.tempOrder.user.email),1)]),Object(i["i"])("tr",null,[C,Object(i["i"])("td",null,Object(i["E"])(n.tempOrder.user.tel),1)]),Object(i["i"])("tr",null,[L,Object(i["i"])("td",null,Object(i["E"])(n.tempOrder.user.address),1)])])):Object(i["f"])("",!0)])]),Object(i["i"])("div",M,[$,Object(i["i"])("table",I,[Object(i["i"])("tbody",null,[Object(i["i"])("tr",null,[z,Object(i["i"])("td",null,Object(i["E"])(n.tempOrder.id),1)]),Object(i["i"])("tr",null,[P,Object(i["i"])("td",null,Object(i["E"])(t.$filter.date(n.tempOrder.create_at)),1)]),Object(i["i"])("tr",null,[S,Object(i["i"])("td",null,[n.tempOrder.paid_date?(Object(i["u"])(),Object(i["e"])("span",q,Object(i["E"])(t.$filter.date(n.tempOrder.paid_date)),1)):(Object(i["u"])(),Object(i["e"])("span",B))])]),Object(i["i"])("tr",null,[J,Object(i["i"])("td",null,[n.tempOrder.is_paid?(Object(i["u"])(),Object(i["e"])("strong",U,"已付款")):(Object(i["u"])(),Object(i["e"])("span",V,"尚未付款"))])]),Object(i["i"])("tr",null,[F,Object(i["i"])("td",null,Object(i["E"])(t.$filter.currency(n.tempOrder.total)),1)])])]),H,Object(i["i"])("table",N,[A,Object(i["i"])("tbody",null,[(Object(i["u"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(n.tempOrder.products,(function(e){return Object(i["u"])(),Object(i["e"])("tr",{key:e.id},[Object(i["i"])("th",null,Object(i["E"])(e.product.title),1),Object(i["i"])("td",null,Object(i["E"])(e.qty)+" / "+Object(i["E"])(e.product.unit),1),Object(i["i"])("td",D,Object(i["E"])(t.$filter.currency(e.final_total)),1)])})),128))])])])])]),G])])],512)}var Q=c("e0ae"),R={props:{orderInfo:{type:Object,default:function(){return{}}}},data:function(){return{modal:"",tempOrder:{},isPaid:!1}},watch:{orderInfo:function(){this.tempOrder=this.orderInfo,this.isPaid=this.tempOrder.is_paid}},mixins:[Q["a"]],methods:{confirm:function(){}}};R.render=K;var T=R,W={data:function(){return{orders:[],tempOrder:{},isLoading:!1}},components:{OrderModal:T},methods:{getOrders:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("c-api","/admin/orders");this.axios.get(e).then((function(e){t.orders=e.data.orders}))},updatePaid:function(t){var e=this;this.isLoading=!0;var c=t.id,i="".concat("https://vue3-course-api.hexschool.io/","api/").concat("c-api","/admin/order/").concat(c);console.log(t,i),this.axios.put(i,{data:t}).then((function(t){console.log(t),e.isLoading=!1}))},delOrder:function(t){var e=this;this.isLoading=!0;var c=t.id,i="".concat("https://vue3-course-api.hexschool.io/","api/").concat("c-api","/admin/order/").concat(c);this.axios.delete(i).then((function(t){console.log(t),t.data.success&&e.getOrders(),e.isLoading=!1}))},modalOpen:function(t){this.tempOrder=Object(j["a"])({},t),console.log(t);var e=this.$refs.orderModal;e.showModal()}},created:function(){this.getOrders()}};W.render=u;e["default"]=W},b0c0:function(t,e,c){var i=c("83ab"),l=c("9bf2").f,n=Function.prototype,a=n.toString,r=/^\s*function ([^ (]*)/,d="name";i&&!(d in n)&&l(n,d,{configurable:!0,get:function(){try{return a.call(this).match(r)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-0fc03156.53080f42.js.map