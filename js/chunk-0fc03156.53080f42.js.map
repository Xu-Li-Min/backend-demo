{"version":3,"sources":["webpack:///./src/views/Orders.vue","webpack:///./src/components/OrderModal.vue","webpack:///./src/components/OrderModal.vue?658e","webpack:///./src/views/Orders.vue?2899","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["class","style","active","isLoading","orders","item","key","create_at","$filter","date","user","email","products","product","title","qty","unit","total","type","id","is_paid","updatePaid","for","modalOpen","delOrder","ref","orderInfo","tempOrder","getOrders","tabindex","role","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","name","tel","address","paid_date","currency","final_total","props","Object","default","data","modal","isPaid","watch","this","mixins","modalMixin","methods","confirm","render","components","OrderModal","api","axios","get","then","res","orderId","console","log","put","delete","success","$refs","orderModal","showModal","created","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","match","error"],"mappings":"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","file":"js/chunk-0fc03156.53080f42.js","sourcesContent":["<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <table class=\"table mt-4\">\n    <thead>\n      <tr>\n        <th>購買時間</th>\n        <th>Email</th>\n        <th>購買款項</th>\n        <th>應付金額</th>\n        <th>是否付款</th>\n        <th>編輯</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"item in orders\" :key=\"item.create_at\">\n        <td>{{ $filter.date(item.create_at) }}</td>\n        <td>{{ item.user.email }}</td>\n        <td class=\"text-right\">\n          <template v-for=\"item in item.products\" :key=\"item\">\n            <p>\n              {{ item.product.title }}\n              <span style=\"font-size: 14px\">(數量：{{ item.qty }}{{ item.product.unit }})</span>\n            </p>\n          </template>\n        </td>\n        <td class=\"text-right\">{{ item.total }}</td>\n        <td>\n          <div class=\"form-check form-switch\">\n            <input\n              class=\"form-check-input\"\n              type=\"checkbox\"\n              :id=\"`paidSwitch${item.id}`\"\n              v-model=\"item.is_paid\"\n              @change=\"updatePaid(item)\"\n            />\n            <label class=\"form-check-label\" :for=\"`paidSwitch${item.id}`\">\n              <span v-if=\"item.is_paid\">已付款</span>\n              <span v-else>未付款</span>\n            </label>\n          </div>\n          <!-- <span class=\"text-success\" v-if=\"item.is_paid\">已付款</span>\n          <span class=\"text-secondary\" v-else>未付款</span> -->\n        </td>\n        <td>\n          <div class=\"btn-group\">\n            <button class=\"btn btn-outline-primary btn-sm\" @click=\"modalOpen(item)\">\n              檢視\n            </button>\n            <button class=\"btn btn-outline-danger btn-sm\" @click=\"delOrder(item)\">\n              刪除\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <OrderModal ref=\"orderModal\" :orderInfo=\"tempOrder\" @confirm-order=\"getOrders\"></OrderModal>\n</template>\n\n<script>\nimport OrderModal from '@/components/OrderModal.vue';\n\nexport default {\n  data() {\n    return {\n      orders: [],\n      tempOrder: {},\n      isLoading: false,\n    };\n  },\n  components: {\n    OrderModal,\n  },\n  methods: {\n    getOrders() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders`;\n\n      this.axios.get(api).then((res) => {\n        this.orders = res.data.orders;\n      });\n    },\n    updatePaid(item) {\n      this.isLoading = true;\n      const orderId = item.id;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${orderId}`;\n      console.log(item, api);\n      this.axios.put(api, { data: item }).then((res) => {\n        console.log(res);\n        this.isLoading = false;\n      });\n    },\n    delOrder(item) {\n      this.isLoading = true;\n      const orderId = item.id;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${orderId}`;\n      this.axios.delete(api).then((res) => {\n        console.log(res);\n        if (res.data.success) {\n          this.getOrders();\n        }\n        this.isLoading = false;\n      });\n    },\n    modalOpen(item) {\n      this.tempOrder = { ...item };\n      console.log(item);\n      const modal = this.$refs.orderModal;\n      modal.showModal();\n    },\n  },\n  created() {\n    this.getOrders();\n  },\n};\n</script>\n","<template>\n  <div\n    class=\"modal fade\"\n    id=\"orderModal\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n            <span>訂單細節</span>\n          </h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-md-4\">\n              <h3>用戶資料</h3>\n              <table class=\"table\">\n                <tbody v-if=\"tempOrder.user\">\n                  <tr>\n                    <th style=\"width: 100px;\">姓名</th>\n                    <td>{{ tempOrder.user.name }}</td>\n                  </tr>\n                  <tr>\n                    <th>Email</th>\n                    <td>{{ tempOrder.user.email }}</td>\n                  </tr>\n                  <tr>\n                    <th>電話</th>\n                    <td>{{ tempOrder.user.tel }}</td>\n                  </tr>\n                  <tr>\n                    <th>地址</th>\n                    <td>{{ tempOrder.user.address }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            <div class=\"col-md-8\">\n              <h3>訂單細節</h3>\n              <table class=\"table\">\n                <tbody>\n                  <tr>\n                    <th style=\"width: 100px\">訂單編號</th>\n                    <td>{{ tempOrder.id }}</td>\n                  </tr>\n                  <tr>\n                    <th>下單時間</th>\n                    <td>{{ $filter.date(tempOrder.create_at) }}</td>\n                  </tr>\n                  <tr>\n                    <th>付款時間</th>\n                    <td>\n                      <span v-if=\"tempOrder.paid_date\">\n                        {{ $filter.date(tempOrder.paid_date) }}\n                      </span>\n                      <span v-else></span>\n                    </td>\n                  </tr>\n                  <tr>\n                    <th>付款狀態</th>\n                    <td>\n                      <strong class=\"text-success\" v-if=\"tempOrder.is_paid\">已付款</strong>\n                      <span class=\"text-muted\" v-else>尚未付款</span>\n                    </td>\n                  </tr>\n                  <tr>\n                    <th>總金額</th>\n                    <td>{{ $filter.currency(tempOrder.total) }}</td>\n                  </tr>\n                </tbody>\n              </table>\n              <h3>選購商品</h3>\n              <table class=\"table\">\n                <thead>\n                  <tr></tr>\n                </thead>\n                <tbody>\n                  <tr v-for=\"item in tempOrder.products\" :key=\"item.id\">\n                    <th>{{ item.product.title }}</th>\n                    <td>{{ item.qty }} / {{ item.product.unit }}</td>\n                    <td class=\"text-end\">{{ $filter.currency(item.final_total) }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <!-- <button type=\"button\" class=\"btn btn-outline-secondary\" data-bs-dismiss=\"modal\">\n            取消\n          </button> -->\n          <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\">\n            確認\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  props: {\n    orderInfo: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n  },\n  data() {\n    return {\n      modal: '',\n      tempOrder: {},\n      isPaid: false,\n    };\n  },\n  watch: {\n    orderInfo() {\n      this.tempOrder = this.orderInfo;\n      this.isPaid = this.tempOrder.is_paid;\n    },\n  },\n  mixins: [modalMixin],\n  methods: {\n    confirm() {},\n  },\n};\n</script>\n","import { render } from \"./OrderModal.vue?vue&type=template&id=d974272c\"\nimport script from \"./OrderModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrderModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Orders.vue?vue&type=template&id=e5cf2fc4\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}